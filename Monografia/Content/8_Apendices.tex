\setboolean{@twoside}{true}
\cleardoublepage
\setboolean{@twoside}{false}

\chapter{Diagrama de classes do aplicativo Android}
\label{AndroidClassDiagram}
\begin{figure}[!hp]
	\centering	
	\includegraphics[angle=90,scale=0.46]{./Resources/AllClassesJustName.png}
	\captionof{figure}{Diagrama de classes do aplicativo baseado em android}
	\label{classCompact}
	
\end{figure}

\chapter{Diagrama de fluxo do aplicativo Android}
\label{AndroidFlowDiagram}
\begin{figure}[!hp]
	\centering	
	\includegraphics[angle=90,scale=0.18]{./Resources/diagramaEstados.png}
	\captionof{figure}{Diagrama de fluxo do aplicativo baseado em android}
	\label{flowCompact}
	
\end{figure}


\iffalse

\begin{center}
\textbf {\color{blue}{Dicas para a redação de uma boa monografia de TCC}}
\end{center}

Observe as diretrizes no site do Depto.
\begin{center}
\small{\textbf{http://www.sel.eesc.usp.br/informatica/graduacao/tcc/tcc\_-\_diretrizes\_EESC\_v\_2010.pdf}).}
\end{center}

Observe os elementos pré-textuais neste documento....tem uma sequência a ser seguida (Capa, contracapa, Ficha catalográfica para a versão final, Listas de Figuras, Tabelas e Símbolos/Abreviaturas).
- Resumo/abstract: texto em \underline{\textbf{um}} parágrafo apenas - deve conter \underline{tudo} resumidamente (introdução, método(s), resultados e conclusões), de tal forma que seja possível compreender a proposta e o que foi alcançado;
	Palavras-chave: Logo abaixo do Resumo/Abstract.

\textbf{Capítulo 1} - Introdução: realmente introduz o leitor indicando quais são as direções do trabalho ? apresenta o tema e o objeto do trabalho e contém as Referências do Estado da arte (quem está fazendo e em que nível os trabalhos da área estão hoje);
- Justificativa/relevância do trabalho: explanação sobre porque o trabalho se justifica e quais os pontos de relevância do mesmo;
- Objetivos: "somente" os objetivos ? podem ser gerais e/ou específicos;
- Organização do trabalho (o que tem em cada capítulo).
?	Não há necessidade de reproduzir (copiar) as obras que embasam o trabalho e sim colocar o suficiente para o entendimento do trabalho e citar as referências;

\textbf{Capítulo 2} - Embasamento Teórico ou Fundamentação Teórica: revisão da literatura dos tópicos  que sustentam a ciência e o conhecimento, relativos aos objetivos e o(s) método(s) escolhido(s) para o desenvolvimento do trabalho;

\textbf{Capítulo 3} - Material e Métodos ou Desenvolvimento do Projeto: descrição clara dos procedimentos e dos materiais adotados para o desenvolvimento do trabalho (sem resultados), incluindo sua adequação ao trabalho. 
Tem que responder às perguntas: 
-está com um tamanho adequado (proporcional) à monografia? 
-há informação suficiente e clara sobre os materiais e sobre os métodos  adotados?
Não há necessidade de reproduzir (copiar) as obras que embasam o trabalho e sim colocar o suficiente para o entendimento do trabalho e citar as referências;

\textbf{Capítulo 4} - Resultados/Discussões: aqui se mostra o que o trabalho permitiu produzir, e às vezes o que pode ser comparado com outros trabalhos - aqui ficam claras se as propostas do trabalho são relevantes ou não, pois devem permitir a discussão do trabalho. 

Deve responder: Os resultados estão claros em bom número (nem muito nem pouco) que permitam avaliar realmente a proposta e o que foi produzido?

\textbf{Capítulo 5} - Conclusões: "fecha" com os objetivos? (respondem aos objetivos?) - aqui é que "se vende o peixe"  pois irão valorizar (ou não) o trabalho realizado. Normalmente é uma parte do trabalho "um pouco desprezada", pois o autor já está "cansado....". Mas aqui é um ponto importante de medida se o trabalho tem ou não valor.
 
\textbf{Referências}: todas as referências {\color{red}{citadas no texto}}. Observar as Diretrizes, pois lá estão os formatos corretos de citação.



\begin{center}	
\underline{Outras observações \textbf{IMPORTANTES} (\color{red}{leia isso com atenção})}
\end{center}

NUNCA copie texto de outro autor sem a devida forma de citação (ver em diretrizes); a cópia configura plágio! Com a Internet e/ou outras ferramentas dedicadas, é muito fácil identificar se houve cópia de texto.
Se você quiser verificar a porcentagem que seu texto apresenta de similaridade com outros na internet, baixe e rode o Copy Spider, por exemplo, ou consulte outros em  http://www.escritacientifica.sc.usp.br/anti-plagio/.
\begin{itemize}
\item [$\Rightarrow$] O tempo verbal a ser usado no texto, de forma geral, é o "PASSADO", pois o trabalho já aconteceu;
\item [$\Rightarrow$] no texto, toda primeira vez que aparecer algum protocolo, procedimento, nome técnico, sigla, abreviatura, etc, além de explicar o que é, é necessário citar a referência. Exemplo: ...um giroscópio (referência) é um tipo de sensor...
\item [$\Rightarrow$] figura que não é de sua autoria deve conter a fonte;
\item [$\Rightarrow$] capriche nas figuras (uma figura bem composta quase não precisa de texto para explicá-la);
\item [$\Rightarrow$] todas as figuras e  tabelas devem ser referenciadas no texto;
\item [$\Rightarrow$] procure manter a "Uniformidade de Notação" para o texto todo, ou seja, se denominou ou se referiu a algo ou alguém de uma certa forma, mantenha essa forma para se referir durante todo o texto;
\item [$\Rightarrow$] não tenha medo de citar os trabalhos de outros autores (isso é imprescindível);
\item [$\Rightarrow$] evite muitas referências de sites, pois são voláteis - procure boas referências nas bases consagradas como a IEEE, pois possuem artigos de ótimo nível;
\item [$\Rightarrow$] NÃO USE O WIKIPEDIA COMO REFERÊNCIA;
\item [$\Rightarrow$] todas as palavras escritas em inglês (ou em outras línguas) devem estar em itálico;
\item [$\Rightarrow$] cuidado com o uso de "através", que significa "atravessar" algo e não por meio de ;
\item [$\Rightarrow$] todas as obras citadas nas referências bibliográficas devem estar citadas no texto;
\item [$\Rightarrow$] não use "satisfatório", "razoável" ou outra palavra que não seja precisa ou que não tenha sido definida a ordem de grandeza no projeto;
\item [$\Rightarrow$] códigos de programas devem estar em Apêndices, pois servem para comprovar o desenvolvimento e facilitar a reprodução do trabalho;
\item [$\Rightarrow$] Anexos são materiais que não são de sua autoria, mas que são importantes e devem fazer parte da monografia para auxiliar e esclarecer o leitor;
\end{itemize} 

\fi

% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %

\setboolean{@twoside}{true}
\cleardoublepage
\setboolean{@twoside}{false}

\chapter{Códigos relevantes}
\label{relevantCode}

\definecolor{dkgreen}{rgb}{0,0.3,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}
\definecolor{myorange}{rgb}{0.8,0.4,0}

\lstset{frame=tb,
	language=Java,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=left,
	numberstyle=\bfseries\tiny\color{gray},
	keywordstyle=\bfseries\color{blue},
	commentstyle=\color{gray},
	stringstyle=\bfseries\color{dkgreen},
	breaklines=true,
	breakatwhitespace=true,
	tabsize=3
}

\renewcommand{\lstlistingname}{Código}

Devido a dimensão do projeto, a exposição de todo o código utilizado como anexo dessa dissertação mostrou-se inviável. Por essa razão, foram selecionados para serem fazerem parte desse documento apenas os códigos considerados chave para o funcionamento do sistema. O código completo pode ser encontrado em \url{https://github.com/guilherme-siqueira/projeto_final/tree/initialBranch/E-Eyes}. No Código \ref{textAdapter}, encontra-se a rotina responsável pela adaptação textual da descrição de uma imagem. Nela, considera-se primeiramente se há alguma paisagem identificada, para então avaliar possíveis faces, rótulos ou textos presentes. Caso não haja, o campo é ignorado, e apenas os campos mais internos, faces, rótulos e textos, são considerados. Obter o número de faces, em vez de apenas saber se há ou não faces, permite que o texto possua concordância verbal. No caso de não haver faces na imagem, considera-se apenas a possível presença de rótulos e textos. 

\begin{lstlisting}[caption=Rotina de construção do texto da descrição da imagem,captionpos=b,label=textAdapter]
private void writeTextualDescription() {
	if (landmarkElement.getText() != null) {
		landmarkElement.translate();
		textualDescription = LANDMARK_INTRO + landmarkElement.getText() + ". ";
		if (nFaces == 1)
			textualDescription += FACE_INTRO + ONE_FACE + faceElement.getText();
		else if (nFaces == 2)
			textualDescription += FACE_INTRO + TWO_FACES + faceElement.getText();
		else if (nFaces > 2)
			textualDescription += FACE_INTRO + MORE_FACES_BEGINNING + nFaces + MORE_FACES_END + faceElement.getText();

		if (labelElement.getText() != null) {
			labelElement.translate();
			textualDescription += LABEL_INTRO + labelElement.getText();
		}

		if (textElement.getText() != null) {
			textualDescription += TEXT_INTRO + textElement.getText();
		}
	} 
	else if (nFaces != 0) {
		textualDescription = FACE_INTRO;
		if (nFaces == 1)
			textualDescription += ONE_FACE + faceElement.getText();
		else if (nFaces == 2)
			textualDescription += TWO_FACES + faceElement.getText();
		else if (nFaces > 2)
			textualDescription += MORE_FACES_BEGINNING + nFaces + MORE_FACES_END + faceElement.getText();

		if (labelElement.getText() != null) {
			labelElement.translate();
			textualDescription += LABEL_INTRO + labelElement.getText();
		}

		if (textElement.getText() != null) {
			textualDescription += TEXT_INTRO + textElement.getText();
		}
	} 
	else if (labelElement.getText() != null) {
		labelElement.translate();
		textualDescription = LABEL_INTRO + labelElement.getText();
		if (textElement.getText() != null) {
			textualDescription += TEXT_INTRO + textElement.getText();
		}
	} 
	else if (textElement.getText() != null) {
		textualDescription = TEXT_INTRO + textElement.getText();
	}
}
\end{lstlisting}



No código \ref{google} encontra-se o método responsável pelo envio da imagem e recebimento de sua descrição. Primeiramente uma instância das funcionalidades da API da Google é criada e construída, por meio da classe Vision. Em seguida é criada uma instância de um objeto que permite múltiplas requisições de imagens, contendo a imagem capturada pelo aplicativo devidamente comprimida, o idioma para possíveis textos escritos, e a lista de diferentes solicitações requisitadas. Então, um objeto de requisição de anotação recebe todas as preferências criadas é executado, e o resultado retornado é recolhido para posterior conversão em linguagem fluente, a partir da classe PhotoDescriptor. 

\begin{lstlisting}[caption=Rotina de conexão e envio de dados para a Google Cloud Vision API,captionpos=b,label={google}]
protected boolean connect(){
	try {	
		HttpTransport httpTransport = AndroidHttp.newCompatibleTransport();
		JsonFactory jsonFactory = GsonFactory.getDefaultInstance();
		
		Vision.Builder builder = new Vision.Builder(httpTransport, jsonFactory, null);
		builder.setVisionRequestInitializer(new
		VisionRequestInitializer(CLOUD_VISION_API_KEY));
		Vision vision = builder.build();
		
		BatchAnnotateImagesRequest batchAnnotateImagesRequest =
		new BatchAnnotateImagesRequest();
		batchAnnotateImagesRequest.setRequests(new ArrayList<AnnotateImageRequest>() {{
		AnnotateImageRequest annotateImageRequest = new AnnotateImageRequest();
		
		Image base64EncodedImage = new Image();
		ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();		
		
		bitmap.compress(Bitmap.CompressFormat.JPEG, 90, byteArrayOutputStream);		
		byte[] imageBytes = byteArrayOutputStream.toByteArray();
		base64EncodedImage.encodeContent(imageBytes);
		annotateImageRequest.setImage(base64EncodedImage);
		
		ImageContext imageContext = new ImageContext();
		String [] languages = { "pt-BR" };
		imageContext.setLanguageHints(Arrays.asList(languages));
		annotateImageRequest.setImageContext(imageContext);		
		annotateImageRequest.setFeatures(requestsArrayList);		
		add(annotateImageRequest);
		}});
		
		Vision.Images.Annotate annotateRequest =
		vision.images().annotate(batchAnnotateImagesRequest);
		
		annotateRequest.setDisableGZipContent(true);
		Log.d(TAG, "created Cloud Vision request object, sending request");
		
		BatchAnnotateImagesResponse response = annotateRequest.execute();
		
		photoDescriptor.callTextAdaptation(response);
		
		return true;
	}
	catch (GoogleJsonResponseException e) {
		Log.d(TAG, "failed to make API request because " + e.getContent());
	}
	catch (IOException e) {
		Log.d(TAG, "failed to make API request because of other IOException " + e.getMessage());
	}
	return false;
}
\end{lstlisting}

Já o Código \ref{arduino} contém a rotina de captura dos sinais vindos do sensor de obstáculos HC-SR04, cálculo da distância, e o envio para a porta serial, onde o módulo Bluetooth HC-05 é conectado. Primeiramente, define-se a taxa de transmissão da porta serial, o pino de saída de sinal para emissão de onda pelo sensor, e o pino de entrada, para recebimento do sinal correspondente ao tempo do eco refletido. 

No ciclo principal, monta-se a onda a ser emitida, com nível baixo de 2ms, e alto, de 10ms, respeitando as especificações mínimas de utilização do sensor, que podem ser encontradas no datasheet em anexo. Em seguida lê-se o valor obtido de eco na porta de entrada, e a distância do obstáculo é calculada com base na equação $  S = V\times t $, em que $V$ representa a velocidade do som no ar em centímetros por segundo, 0.034cm/s, e $t$ é a metade do tempo entre a emissão e a recepção do sinal da onda, ou seja, o tempo entre a emissão da onda e o encontro com o obstáculo. Por fim, verifica-se se o valor lido não ultrapassou o limite de precisão do sensor, de 4 metros, com o intuito de evitar valores pouco confiáveis, e a cada um segundo a rotina amostra o sinal e o envia para a porta serial, onde a entrada do bluetooth está conectada. 



\lstset{frame=tb,
	aboveskip=3mm,
	belowskip=3mm,
	showstringspaces=false,
	columns=flexible,
	basicstyle={\small\ttfamily},
	numbers=left,
	numberstyle=\bfseries\tiny\color{gray},
	commentstyle=\color{gray},
	stringstyle=\bfseries\color{dkgreen},
	breaklines=true,
	breakatwhitespace=true,
	tabsize=3,
	keywordstyle=\bfseries\color{myorange},
	keywords={void, setup, loop, Serial, begin, delayMicroseconds, digitalWrite, pulseIn,if,println, pinMode, delay },
	rulecolor=\color{black},
	emphstyle=\bfseries\color{blue},
	emph={HIGH, INPUT, OUTPUT, LOW}
}

\begin{lstlisting}[caption=Rotina executada na placa Arduino,captionpos=b,label={arduino}]
//Define os pinos para o trigger e echo
#define pino_trigger 4
#define pino_echo 5

long duration;
int distance;

void setup()
{
	Serial.begin(9600);
	pinMode(pino_trigger, OUTPUT);
	pinMode(pino_echo, INPUT);
}

void loop()
{
	digitalWrite(pino_trigger, LOW);
	delayMicroseconds(2);
	// Sets the trigPin on HIGH state for 10 micro seconds
	digitalWrite(pino_trigger, HIGH);
	delayMicroseconds(10);
	digitalWrite(pino_trigger, LOW);
	// Reads the echoPin, returns the sound wave travel time in microseconds
	duration = pulseIn(pino_echo, HIGH);
	// Calculating the distance
	distance= duration*0.034/2;

	if(distance < 400)
	{
		Serial.println(distance);
		delay(1000);
	}
}
\end{lstlisting}


\iffalse
\begin{center}
\textbf {\color{blue}{Cuidados e orientações para a elaboração da Apresentação do TCC}}
\end{center}


Todos os meus alunos me enviam a apresentação previamente, pois faz parte do procedimento que adoto para os TCCs.
Como tem-se até 30 minutos para fazer a apresentação deve-se dimensionar a quantidade de slides para isso. Cada um tem seu "timming" com relação à quantidade de informação versus tempo disponível para apresentação.
Os slides devem ser sempre muito mais visuais que textuais, ou seja, não se deve colocar frases e "ficar lendo" as mesmas. Os slides devem apresentar uma forma "clean" para que sirva apenas de guia para a apresentação do trabalho. 

Não carregue de texto os slides...
Leia no site da Elétrica (/Graduação/Trabalhos de Conclusão de Curso - TCC) as DIRETRIZES GERAIS PARA ELABORAÇÃO DO TRABALHO DE FORMATURA - TCC,
onde pode-se encontrar as Fichas de Avaliação que são sugeridas pelo Depto, que não são necessariamente seguidas à risca pelos avaliadores, mas que servem de bom guia para os alunos entenderem como são feitas as avaliações.
Tente não utilizar fundo escuro, pois escurece o ambiente e às vezes não se consegue o visual esperado. Sempre que possível teste antes no local da apresentação. 



% % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % % %
\chapter{Monografia Parcial do TCC}
\label{Apêndice  Apêndice C}


\begin{center}
\textbf {\color{blue}{Cuidados e orientações para a composição da Monografia Parcial do TCC}}
\end{center}


Trata-se de uma Monografia completa, com todas as partes de uma Monografia final. 

Atente-se para as partes em {\color{red}{vermelho}}.

\begin{itemize}
\item Resumo
\item Introdução
\item Objetivos
\item Justificativas/Relevância
\item Embasamento Teórico (Fundamentação Teórica-Revisão Bibliográfica)
\item Material e métodos ou Desenvolvimento do Projeto
\item {\color{red}{Resultados Preliminares}}
\item {\color{red}{Conclusões Preliminares}}
\item {\color{red}{Sequência do trabalho (indicando possíveis correções de rota do projeto)}}
\item {\color{red}{Cronograma Final (com correções se necessário)}}
\item Referências 
\item Apêndices
\item Anexos
\end{itemize} 

Sendo bem feito, irá poupar esforço para a redação da monografia.

\fi
